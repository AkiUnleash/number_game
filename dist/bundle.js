(()=>{"use strict";class t{constructor(t,e,n=!0){this.hostElement=document.getElementById(e),this.templateElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,n&&this.attach()}attach(){this.hostElement.insertAdjacentElement("beforeend",this.element)}}class e{constructor(){this.listeners=[],this.state={question:[],point:[]}}static getInstance(){return e._instance||(e._instance=new e),e._instance}addListener(t){this.listeners.push(t)}setQuestion(){let t=Math.floor(1e5*Math.random()-1).toString();this.state.question=t.toString().split("");for(const t of this.listeners)console.log(this.listeners),t(this.state.question.slice())}getQuestion(){return this.state.question}checkTheAnswer(t){if(t===this.state.question[0]?(this.state.question.shift(),this.state.point.push(10)):this.state.point.push(-10),0===this.state.question.length)this.setQuestion(),this.state.point.push(90);else for(const t of this.listeners)t(this.state.question.slice());console.log(this.state.point)}}const n=e.getInstance();class s extends t{constructor(){super("question","question_app",!1),n.setQuestion(),this.renderContent()}configure(){}renderContent(){const t=n.getQuestion(),e=document.getElementById("question_app");let s=document.createDocumentFragment();for(const e of t){const t=this.element.cloneNode(!0);t.textContent=e,s.appendChild(t)}e.appendChild(s)}}class o extends t{constructor(){super("game-screen","app")}renderQuestion(){}configure(){}}class i extends t{constructor(t=3){super("standby","app"),this._count=t,this.configure()}configure(){return t=this,e=void 0,s=function*(){let t=yield this._countDown(this._count);this.element.textContent=t.toString(),t=yield this._countDown(t),this.element.textContent=t.toString(),t=yield this._countDown(t),this._gameScreenShow()},new((n=void 0)||(n=Promise))((function(o,i){function r(t){try{h(s.next(t))}catch(t){i(t)}}function c(t){try{h(s.throw(t))}catch(t){i(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}h((s=s.apply(t,e||[])).next())}));var t,e,n,s}_countDown(t){return new Promise((e=>{setTimeout((function(){e(--t)}),1e3)}))}_gameScreenShow(){this.element.remove(),new o,new s}arrayshuffle(t){for(let e=t.length;1<e;e--){const n=Math.floor(Math.random()*e);[t[n],t[e-1]]=[t[e-1],t[n]]}return t}}new class extends t{constructor(){super("start-button","app"),this.elementStart=this.element.querySelector("#start"),this.configure()}configure(){this.elementStart.addEventListener("click",this.clickHandler.bind(this))}clickHandler(t){this.element.remove(),new i}}})();