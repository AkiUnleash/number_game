(()=>{"use strict";class t{constructor(t,e){this.hostElement=document.getElementById(e),this.templateElement=document.getElementById(t);const n=document.importNode(this.templateElement.content,!0);this.element=n.firstElementChild,this.attach()}attach(){this.hostElement.insertAdjacentElement("beforeend",this.element)}}class e{constructor(){this.listeners=[],this.state={question:[],point:[]}}static getInstance(){return e._instance||(e._instance=new e),e._instance}addListener(t){this.listeners.push(t)}setQuestion(){let t=Math.floor(1e5*Math.random()-1).toString();this.state.question=t.toString().split("");for(const t of this.listeners)console.log(this.listeners),t(this.state.question.slice())}getQuestion(){return this.state.question}checkTheAnswer(t){if(t===this.state.question[0]?(this.state.question.shift(),this.state.point.push(10)):this.state.point.push(-10),0===this.state.question.length)this.setQuestion(),this.state.point.push(90);else for(const t of this.listeners)t(this.state.question.slice());console.log(this.state.point)}}const n=e.getInstance();class s extends t{constructor(t){super("number-button","app"),this.acrivenumber=t,this.assignedState=[],n.addListener((t=>{this.assignedState=t,this.renderQuestion()})),this.configure()}renderQuestion(){const t=document.getElementById("Question_no");t.textContent="";for(const e of this.assignedState){const n=document.createElement("div");n.textContent=e,t.appendChild(n)}}configure(){this.element.addEventListener("click",this.submitHandler.bind(this)),this.element.value=this.acrivenumber.toString()}submitHandler(t){t.preventDefault(),n.checkTheAnswer(this.element.value)}}class i extends t{constructor(){super("question","app"),n.setQuestion(),this.renderContent()}configure(){}renderContent(){const t=n.getQuestion(),e=document.getElementById("Question_no");e.textContent="";for(const n of t){const t=document.createElement("div");t.textContent=n,e.appendChild(t)}}}class o extends t{constructor(t=3){super("standby","app"),this._count=t,this.configure()}configure(){return t=this,e=void 0,s=function*(){let t=yield this._countDown(this._count);this.element.textContent=t.toString(),t=yield this._countDown(t),this.element.textContent=t.toString(),t=yield this._countDown(t),this._gameScreenShow()},new((n=void 0)||(n=Promise))((function(i,o){function r(t){try{h(s.next(t))}catch(t){o(t)}}function c(t){try{h(s.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}h((s=s.apply(t,e||[])).next())}));var t,e,n,s}_countDown(t){return new Promise((e=>{setTimeout((function(){e(--t)}),1e3)}))}_gameScreenShow(){this.element.remove(),new i;for(const t of this.arrayshuffle([...Array(10)].map(((t,e)=>e))))new s(t)}arrayshuffle(t){for(let e=t.length;1<e;e--){const n=Math.floor(Math.random()*e);[t[n],t[e-1]]=[t[e-1],t[n]]}return t}}new class extends t{constructor(){super("start-button","app"),this.elementStart=this.element.querySelector("#start"),this.configure()}configure(){this.elementStart.addEventListener("click",this.clickHandler.bind(this))}clickHandler(t){this.element.remove(),new o}}})();